<h1>Welcome to the Latest News</h1>
<p>Stay updated with the latest news from around the world.</p>

<script>
    $(document).ready(function () {
        // Fetch all articles from the backend
        $.ajax({
            url: '/articles',  // Adjusted to match the correct API endpoint
            dataType: 'json',
            success: function (data) {
                if (data && data.length > 0) {
                    $.each(data, function (key, article) {
                        let articleHtml = `
                        <div class="card news-article my-5">
                          <img src="${article.image}" class="card-img-top" alt="...">
                          <div class="card-body">
                            <h5 class="card-title">${article.title}</h5>
                            <p class="card-text">${article.text}</p>
                            <p class="card-text"><small class="text-muted">Last updated ${article.updated_at}</small></p>
                            <a href="#view_article" data-article-id="${article.id}" class="btn btn-primary view-article">View Article</a>
                          </div>
                        </div>
                        `;
                        $('#view_home').append(articleHtml);
                    });
                } else {
                    $('#view_home').append('<p>No articles found.</p>');
                }
            },
            error: function () {
                $('#view_home').append('<p>Error fetching articles.</p>');
            }
        });
        $(document).on('click', '.view-article', function(e) {
            e.preventDefault();
            let articleId = $(this).data('article-id');
            sessionStorage.setItem('currentArticleId', articleId);
            window.location.hash = '#view_article'; 
        });
    });
</script>
